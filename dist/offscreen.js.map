{"version":3,"file":"offscreen.js","mappings":"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","sources":["webpack://candidai-chrome-extension/./src/ts/utils/constants.ts","webpack://candidai-chrome-extension/./src/ts/utils/messaging.ts","webpack://candidai-chrome-extension/webpack/bootstrap","webpack://candidai-chrome-extension/webpack/runtime/define property getters","webpack://candidai-chrome-extension/webpack/runtime/hasOwnProperty shorthand","webpack://candidai-chrome-extension/webpack/runtime/make namespace object","webpack://candidai-chrome-extension/./src/offscreen/offscreen.ts"],"sourcesContent":["/**\n * CandidAI Chrome Extension - Constants\n * Centralized configuration and constants for enterprise-grade development\n * Implements type-safe constants with proper categorization\n */\n\n/**\n * CandidAI Meeting Assistant - Core Constants\n * Enterprise-grade configuration management for multi-context AI assistance\n * Supports interviews, sales, meetings, reviews, and various interaction tones\n */\n\n// =============================================================================\n// TYPE DEFINITIONS\n// =============================================================================\n\nexport interface LLMPreferences {\n  preferredProvider: 'openai' | 'anthropic' | 'gemini';\n  fallbackOrder: readonly ('openai' | 'anthropic' | 'gemini')[];\n  modelPreferences: {\n    openai: string;\n    anthropic: string;\n    gemini: string;\n  };\n}\n\nexport interface UIPreferences {\n  theme: 'light' | 'dark' | 'auto';\n  fontSize: 'small' | 'medium' | 'large';\n  autoScroll: boolean;\n  language: string;\n}\n\nexport interface TranscriptionPreferences {\n  language: string;\n  useExternalStt: boolean;\n  silenceThreshold: number;\n  silenceDuration: number;\n}\n\nexport interface ResponsePreferences {\n  tone: 'professional' | 'casual' | 'formal';\n  length: 'short' | 'medium' | 'long';\n  detailLevel: 'low' | 'medium' | 'high';\n}\n\nexport interface SessionManagement {\n  autoCleanupDelayMs: number;\n  maxActiveSessions: number;\n}\n\nexport interface SpeechToTextConfig {\n  enableQuestionDetection: boolean;\n  questionDetectionMethod: 'punctuation' | 'ml_model' | 'keyword_based';\n  questionKeywords: string[];\n  enableSpeakerDiarization: boolean;\n  defaultSpeaker: 'interviewer' | 'candidate' | 'unknown';\n  confidenceThreshold: number;\n}\n\nexport interface AppConfig {\n  llmPreferences: LLMPreferences;\n  uiPreferences: UIPreferences;\n  transcriptionPreferences: TranscriptionPreferences;\n  responsePreferences: ResponsePreferences;\n  sessionManagement: SessionManagement;\n  speechToTextConfig: SpeechToTextConfig;\n}\n\nexport interface SessionMetadata {\n  platform?: string;\n  tabId?: number;\n  initiatedTs?: number;\n  uiConnected?: boolean;\n  company?: string;\n  position?: string;\n  initiatedBy?: string;\n  [key: string]: any; // Allow additional metadata fields\n}\n\nexport interface InterviewSession {\n  id: string;\n  platform: string;\n  startTime: number;\n  endTime?: number;\n  state: 'ACTIVE' | 'ENDING' | 'ENDED' | 'ERROR_ANALYSIS_FAILED' | 'PORT_DISCONNECTED';\n  transcriptions: TranscriptionEntry[];\n  suggestions: SuggestionEntry[];\n  metadata: SessionMetadata;\n  context?: any; // Context from ContextManager\n  report?: any; // Final report from PerformanceAnalyzer\n  error?: string;\n}\n\nexport interface TranscriptionEntry {\n  text: string;\n  timestamp: number;\n  confidence: number;\n  isQuestion: boolean;\n  speaker?: string;\n  suggestions?: SuggestionEntry[];\n}\n\nexport interface SuggestionEntry {\n  id?: string;\n  text: string;\n  type?: string;\n  confidence?: number;\n  timestamp: number;\n  wasUsed?: boolean;\n}\n\nexport interface TranscriptionData {\n  text: string;\n  confidence?: number;\n  isQuestion?: boolean;\n  speaker?: string;\n  timestamp?: number;\n}\n\nexport interface MessagePayload {\n  command: string;\n  payload?: any;\n}\n\nexport interface ServiceWorkerResponse {\n  success: boolean;\n  data?: any;\n  error?: string;\n  details?: string;\n}\n\nexport interface PortMessage {\n  command: string;\n  payload?: any;\n}\n\n// =============================================================================\n// MESSAGE COMMANDS\n// =============================================================================\n\nexport const MESSAGE_COMMANDS = {\n  // Session Management\n  INIT_INTERVIEW_SESSION: 'init_interview_session',\n  END_INTERVIEW_SESSION: 'end_interview_session',\n  UPDATE_CONTEXT: 'update_context',\n  GET_APP_STATE: 'get_app_state',\n\n  // Transcription\n  START_TRANSCRIPTION: 'start_transcription',\n  STOP_TRANSCRIPTION: 'stop_transcription',\n  PROCESS_TRANSCRIPTION: 'process_transcription',\n\n  // Audio Processing\n  START_AUDIO_CAPTURE: 'start_audio_capture',\n  STOP_AUDIO_CAPTURE: 'stop_audio_capture',\n  AUDIO_DATA: 'audio_data',\n\n  // Platform Detection\n  PLATFORM_DETECTED: 'platform_detected',\n  GET_PLATFORM_STATUS: 'get_platform_status',\n  VIDEO_CALL_STATE_CHANGED: 'video_call_state_changed',\n\n  // Content Script\n  EXTRACT_PAGE_CONTEXT: 'extract_page_context',\n  INJECT_UI: 'inject_ui',\n\n  // Visual Analysis\n  CAPTURE_VISUAL: 'capture_visual',\n  ANALYZE_VISUAL: 'analyze_visual',\n\n  // Document Management\n  UPLOAD_DOCUMENT: 'upload_document',\n  PROCESS_DOCUMENT: 'process_document',\n  GET_DOCUMENTS: 'get_documents',\n\n  // AI Responses\n  GET_SUGGESTION: 'get_suggestion',\n  GENERATE_RESPONSE: 'generate_response',\n\n  // Testing\n  TEST_LLM_CONNECTION: 'test_llm_connection',\n  TEST_PLATFORM_DETECTION: 'test_platform_detection',\n  PING: 'ping',\n} as const;\n\nexport type MessageCommand = typeof MESSAGE_COMMANDS[keyof typeof MESSAGE_COMMANDS];\n\n// =============================================================================\n// MESSAGE TARGETS\n// =============================================================================\n\nexport const MESSAGE_TARGETS = {\n  SERVICE_WORKER: 'service_worker',\n  CONTENT_SCRIPT: 'content_script',\n  SIDE_PANEL: 'side_panel',\n  OPTIONS_PAGE: 'options_page',\n  OFFSCREEN: 'offscreen',\n} as const;\n\n// =============================================================================\n// PORT COMMANDS\n// =============================================================================\n\nexport const PORT_COMMANDS = {\n  SERVICE_WORKER_READY: 'service_worker_ready',\n  SIDE_PANEL_READY: 'side_panel_ready',\n  CONNECTION_ESTABLISHED: 'connection_established',\n  HEARTBEAT: 'heartbeat',\n} as const;\n\n// =============================================================================\n// STORAGE KEYS\n// =============================================================================\n\nexport const STORAGE_KEYS = {\n  APP_CONFIG: 'app_config',\n  USER_PREFERENCES: 'user_preferences',\n  SESSION_DATA: 'session_data',\n  ACTIVE_INTERVIEW: 'active_interview',\n  DOCUMENT_CACHE: 'document_cache',\n  PERFORMANCE_METRICS: 'performance_metrics',\n  ERROR_LOGS: 'error_logs',\n  AUDIT_TRAIL: 'audit_trail',\n} as const;\n\nexport type StorageKey = typeof STORAGE_KEYS[keyof typeof STORAGE_KEYS];\n\n// =============================================================================\n// OFFSCREEN DOCUMENT CONFIGURATION\n// =============================================================================\n\nexport const OFFSCREEN_DOCUMENT_PATH = 'offscreen/offscreen.html';\n\nexport const OFFSCREEN_REASONS = (typeof chrome !== 'undefined' && chrome.offscreen) ? [\n  chrome.offscreen.Reason.USER_MEDIA,\n  chrome.offscreen.Reason.AUDIO_PLAYBACK,\n] : ['USER_MEDIA', 'AUDIO_PLAYBACK'] as const;\n\nexport const OFFSCREEN_JUSTIFICATION = \n  'Recording audio for AI-powered meeting assistance and transcription';\n\n// =============================================================================\n// PLATFORM CONFIGURATIONS\n// =============================================================================\n\nexport const SUPPORTED_PLATFORMS = {\n  GOOGLE_MEET: {\n    name: 'Google Meet',\n    domain: 'meet.google.com',\n    selectors: {\n      videoContainer: '[data-allocation-index]',\n      participantsList: '[data-participant-id]',\n      chatButton: '[data-tooltip*=\"chat\"]',\n      micButton: '[data-tooltip*=\"microphone\"]',\n      cameraButton: '[data-tooltip*=\"camera\"]',\n    },\n  },\n  ZOOM: {\n    name: 'Zoom',\n    domain: 'zoom.us',\n    selectors: {\n      videoContainer: '.video-container',\n      participantsList: '.participants-list',\n      chatButton: '.chat-button',\n      micButton: '.audio-button',\n      cameraButton: '.video-button',\n    },\n  },\n  MICROSOFT_TEAMS: {\n    name: 'Microsoft Teams',\n    domain: 'teams.microsoft.com',\n    selectors: {\n      videoContainer: '[data-tid=\"video-container\"]',\n      participantsList: '[data-tid=\"participants-list\"]',\n      chatButton: '[data-tid=\"chat-button\"]',\n      micButton: '[data-tid=\"microphone-button\"]',\n      cameraButton: '[data-tid=\"camera-button\"]',\n    },\n  },\n  LINKEDIN: {\n    name: 'LinkedIn',\n    domain: 'linkedin.com',\n    selectors: {\n      interviewContainer: '.interview-container',\n      questionText: '.question-text',\n      answerInput: '.answer-input',\n      submitButton: '.submit-button',\n    },\n  },\n  HIREVUE: {\n    name: 'HireVue',\n    domain: 'hirevue.com',\n    selectors: {\n      questionContainer: '.question-container',\n      videoPlayer: '.video-player',\n      recordButton: '.record-button',\n      submitButton: '.submit-button',\n    },\n  },\n} as const;\n\n// =============================================================================\n// LLM PROVIDER CONFIGURATIONS\n// =============================================================================\n\nexport const LLM_PROVIDERS = {\n  OPENAI: {\n    name: 'OpenAI',\n    baseUrl: 'https://api.openai.com/v1',\n    models: ['gpt-4', 'gpt-4-turbo', 'gpt-3.5-turbo'],\n    maxTokens: 4096,\n    rateLimits: {\n      requestsPerMinute: 60,\n      tokensPerMinute: 90000,\n      dailyLimit: 1000000,\n    },\n  },\n  ANTHROPIC: {\n    name: 'Anthropic',\n    baseUrl: 'https://api.anthropic.com/v1',\n    models: ['claude-3-opus', 'claude-3-sonnet', 'claude-3-haiku'],\n    maxTokens: 4096,\n    rateLimits: {\n      requestsPerMinute: 50,\n      tokensPerMinute: 40000,\n      dailyLimit: 500000,\n    },\n  },\n  GOOGLE: {\n    name: 'Google',\n    baseUrl: 'https://generativelanguage.googleapis.com/v1',\n    models: ['gemini-pro', 'gemini-pro-vision'],\n    maxTokens: 2048,\n    rateLimits: {\n      requestsPerMinute: 60,\n      tokensPerMinute: 32000,\n      dailyLimit: 1000000,\n    },\n  },\n} as const;\n\n// =============================================================================\n// DEFAULT CONFIGURATION\n// =============================================================================\n\nexport const DEFAULT_APP_CONFIG = {\n  version: '1.0.0',\n  environment: 'production' as const,\n  features: {\n    enableTranscription: true,\n    enableAIResponses: true,\n    enableDocumentAnalysis: true,\n    enableVisualAnalysis: true,\n    enablePerformanceTracking: true,\n    enableDebugMode: false,\n  },\n  llmProviders: [\n    {\n      name: 'OpenAI',\n      apiKey: '',\n      baseUrl: LLM_PROVIDERS.OPENAI.baseUrl,\n      model: 'gpt-4',\n      maxTokens: 2048,\n      temperature: 0.7,\n      isEnabled: false,\n      priority: 1,\n      rateLimits: LLM_PROVIDERS.OPENAI.rateLimits,\n    },\n    {\n      name: 'Anthropic',\n      apiKey: '',\n      baseUrl: LLM_PROVIDERS.ANTHROPIC.baseUrl,\n      model: 'claude-3-sonnet',\n      maxTokens: 2048,\n      temperature: 0.7,\n      isEnabled: false,\n      priority: 2,\n      rateLimits: LLM_PROVIDERS.ANTHROPIC.rateLimits,\n    },\n  ],\n  ui: {\n    theme: 'auto' as const,\n    language: 'en',\n    fontSize: 'medium' as const,\n    animations: true,\n    notifications: true,\n  },\n  security: {\n    encryptStorage: true,\n    validateInputs: true,\n    rateLimiting: true,\n    auditLogging: true,\n    csrfProtection: true,\n  },\n  performance: {\n    enableMetrics: true,\n    sampleRate: 0.1,\n    maxHistorySize: 1000,\n    alertThresholds: {\n      responseTime: 5000,\n      errorRate: 0.05,\n      memoryUsage: 100 * 1024 * 1024, // 100MB\n    },\n  },\n} as const;\n\n// =============================================================================\n// AUDIO CONFIGURATION\n// =============================================================================\n\nexport const AUDIO_CONFIG = {\n  SAMPLE_RATE: 16000,\n  CHANNELS: 1,\n  BIT_DEPTH: 16,\n  BUFFER_SIZE: 4096,\n  SILENCE_THRESHOLD: 0.01,\n  SILENCE_DURATION: 1000, // ms\n  MAX_RECORDING_DURATION: 300000, // 5 minutes\n} as const;\n\n// =============================================================================\n// UI CONSTANTS\n// =============================================================================\n\nexport const UI_CONSTANTS = {\n  ANIMATION_DURATION: 300,\n  DEBOUNCE_DELAY: 500,\n  TOAST_DURATION: 5000,\n  MAX_SUGGESTIONS: 5,\n  MAX_CONVERSATION_HISTORY: 100,\n  SCROLL_THRESHOLD: 100,\n} as const;\n\n// =============================================================================\n// ERROR CODES\n// =============================================================================\n\nexport const ERROR_CODES = {\n  // General\n  UNKNOWN_ERROR: 'UNKNOWN_ERROR',\n  INITIALIZATION_FAILED: 'INITIALIZATION_FAILED',\n  CONFIGURATION_ERROR: 'CONFIGURATION_ERROR',\n\n  // Authentication\n  API_KEY_MISSING: 'API_KEY_MISSING',\n  API_KEY_INVALID: 'API_KEY_INVALID',\n  AUTHENTICATION_FAILED: 'AUTHENTICATION_FAILED',\n\n  // Network\n  NETWORK_ERROR: 'NETWORK_ERROR',\n  TIMEOUT_ERROR: 'TIMEOUT_ERROR',\n  RATE_LIMIT_EXCEEDED: 'RATE_LIMIT_EXCEEDED',\n\n  // Audio\n  AUDIO_PERMISSION_DENIED: 'AUDIO_PERMISSION_DENIED',\n  AUDIO_DEVICE_ERROR: 'AUDIO_DEVICE_ERROR',\n  TRANSCRIPTION_FAILED: 'TRANSCRIPTION_FAILED',\n\n  // Platform\n  PLATFORM_NOT_SUPPORTED: 'PLATFORM_NOT_SUPPORTED',\n  PLATFORM_DETECTION_FAILED: 'PLATFORM_DETECTION_FAILED',\n\n  // Document\n  DOCUMENT_UPLOAD_FAILED: 'DOCUMENT_UPLOAD_FAILED',\n  DOCUMENT_PROCESSING_FAILED: 'DOCUMENT_PROCESSING_FAILED',\n  DOCUMENT_TOO_LARGE: 'DOCUMENT_TOO_LARGE',\n\n  // Storage\n  STORAGE_QUOTA_EXCEEDED: 'STORAGE_QUOTA_EXCEEDED',\n  STORAGE_ACCESS_DENIED: 'STORAGE_ACCESS_DENIED',\n} as const;\n\n// =============================================================================\n// PERFORMANCE THRESHOLDS\n// =============================================================================\n\nexport const PERFORMANCE_THRESHOLDS = {\n  RESPONSE_TIME_WARNING: 2000, // ms\n  RESPONSE_TIME_ERROR: 5000, // ms\n  MEMORY_WARNING: 50 * 1024 * 1024, // 50MB\n  MEMORY_ERROR: 100 * 1024 * 1024, // 100MB\n  ERROR_RATE_WARNING: 0.02, // 2%\n  ERROR_RATE_ERROR: 0.05, // 5%\n} as const;\n\n// =============================================================================\n// SECURITY CONSTANTS\n// =============================================================================\n\nexport const SECURITY_CONSTANTS = {\n  MAX_FILE_SIZE: 10 * 1024 * 1024, // 10MB\n  ALLOWED_FILE_TYPES: ['pdf', 'docx', 'txt', 'md'],\n  MAX_API_KEY_LENGTH: 256,\n  MIN_PASSWORD_LENGTH: 8,\n  SESSION_TIMEOUT: 24 * 60 * 60 * 1000, // 24 hours\n  ENCRYPTION_ALGORITHM: 'AES-GCM',\n} as const;\n\n// =============================================================================\n// UI CONFIGURATION CONSTANTS\n// =============================================================================\n\nexport const CALL_TYPES = {\n  INTERVIEW: 'interview',\n  MEETING: 'meeting', \n  PRESENTATION: 'presentation',\n  TRAINING: 'training',\n} as const;\n\nexport const TONE_TYPES = {\n  PROFESSIONAL: 'professional',\n  CASUAL: 'casual',\n  FORMAL: 'formal',\n  FRIENDLY: 'friendly',\n} as const;\n\nexport const CALL_TYPE_CONFIGS = {\n  [CALL_TYPES.INTERVIEW]: {\n    name: 'Interview',\n    description: 'One-on-one interview session',\n    suggestedTone: TONE_TYPES.PROFESSIONAL,\n    features: ['transcription', 'suggestions', 'document_analysis'],\n  },\n  [CALL_TYPES.MEETING]: {\n    name: 'Meeting',\n    description: 'Team meeting or group discussion',\n    suggestedTone: TONE_TYPES.PROFESSIONAL,\n    features: ['transcription', 'action_items', 'summary'],\n  },\n  [CALL_TYPES.PRESENTATION]: {\n    name: 'Presentation',\n    description: 'Presentation or demo session',\n    suggestedTone: TONE_TYPES.FORMAL,\n    features: ['visual_analysis', 'audience_feedback'],\n  },\n  [CALL_TYPES.TRAINING]: {\n    name: 'Training',\n    description: 'Training or educational session',\n    suggestedTone: TONE_TYPES.FRIENDLY,\n    features: ['knowledge_base', 'q_and_a'],\n  },\n} as const;\n\nexport const TONE_CONFIGS = {\n  [TONE_TYPES.PROFESSIONAL]: {\n    name: 'Professional',\n    description: 'Formal business communication',\n    style: 'structured',\n    vocabulary: 'business',\n  },\n  [TONE_TYPES.CASUAL]: {\n    name: 'Casual',\n    description: 'Relaxed conversational style',\n    style: 'informal',\n    vocabulary: 'everyday',\n  },\n  [TONE_TYPES.FORMAL]: {\n    name: 'Formal',\n    description: 'Academic or official communication',\n    style: 'precise',\n    vocabulary: 'formal',\n  },\n  [TONE_TYPES.FRIENDLY]: {\n    name: 'Friendly',\n    description: 'Warm and approachable communication',\n    style: 'conversational',\n    vocabulary: 'accessible',\n  },\n} as const;\n\n// =============================================================================\n// DOCUMENT MANAGEMENT CONSTANTS\n// =============================================================================\n\nexport const MAX_DOCUMENTS = 10;\n\nexport const SUPPORTED_DOCUMENT_FORMATS = [\n  'pdf',\n  'docx',\n  'txt',\n  'md',\n  'doc',\n  'rtf',\n] as const;\n\n// =============================================================================\n// DOCUMENT PROCESSING CONSTANTS\n// =============================================================================\n\nexport const MAX_DOCUMENT_SIZE = 10 * 1024 * 1024; // 10MB\n\nexport const DOCUMENT_TYPES = {\n  RESUME: 'resume',\n  JOB_DESCRIPTION: 'job_description',\n  COVER_LETTER: 'cover_letter',\n  PORTFOLIO: 'portfolio',\n  REFERENCE: 'reference',\n  OTHER: 'other',\n} as const;\n\nexport const PRIORITY_LEVELS = {\n  LOW: 1,\n  MEDIUM: 2,\n  HIGH: 3,\n  URGENT: 4,\n  CRITICAL: 5,\n} as const;\n\nexport const DOCUMENT_PROCESSING_CONFIG = {\n  MAX_FILE_SIZE: 10 * 1024 * 1024, // 10MB\n  ALLOWED_MIME_TYPES: [\n    'application/pdf',\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    'application/msword',\n    'text/plain',\n    'text/markdown',\n    'application/rtf',\n  ],\n  PROCESSING_TIMEOUT: 30000, // 30 seconds\n} as const;\n\n// =============================================================================\n// TYPE EXPORTS\n// =============================================================================\n\nexport type MessageTarget = typeof MESSAGE_TARGETS[keyof typeof MESSAGE_TARGETS];\nexport type PortCommand = typeof PORT_COMMANDS[keyof typeof PORT_COMMANDS];\nexport type ErrorCode = typeof ERROR_CODES[keyof typeof ERROR_CODES];\nexport type SupportedPlatform = keyof typeof SUPPORTED_PLATFORMS;\nexport type CallTypeKey = keyof typeof CALL_TYPES;\nexport type ToneTypeKey = keyof typeof TONE_TYPES;\n","/**\n * Message Broker - Enterprise-grade messaging system\n * Implements type-safe communication between extension components\n * Provides error handling, retry logic, and performance monitoring\n */\n\nimport type { MessageRequest, MessageResponse, ChromeSender } from '../types/index';\nimport { MESSAGE_COMMANDS, MESSAGE_TARGETS } from './constants';\n\n/**\n * Message Handler Interface\n */\nexport interface MessageHandler {\n  command: string;\n  handler: (\n    request: MessageRequest,\n    sender: ChromeSender,\n    sendResponse: (response: MessageResponse) => void,\n  ) => void | Promise<void>;\n}\n\n/**\n * Message Broker Configuration\n */\nexport interface MessageBrokerConfig {\n  timeout: number;\n  retryAttempts: number;\n  retryDelay: number;\n  enableLogging: boolean;\n}\n\n/**\n * Default configuration for message broker\n */\nconst DEFAULT_CONFIG: MessageBrokerConfig = {\n  timeout: 30000, // 30 seconds\n  retryAttempts: 3,\n  retryDelay: 1000, // 1 second\n  enableLogging: true,\n};\n\n/**\n * MessageBroker - Centralized message handling system\n * Implements enterprise patterns for reliable communication\n */\nexport class MessageBroker {\n  private readonly config: MessageBrokerConfig;\n  private readonly handlers = new Map<string, MessageHandler['handler']>();\n  private readonly pendingRequests = new Map<string, {\n    resolve: (value: MessageResponse) => void;\n    reject: (reason: Error) => void;\n    timeout: number;\n  }>();\n\n  constructor(config: Partial<MessageBrokerConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.initializeMessageListener();\n  }\n\n  /**\n   * Initialize the message listener for incoming messages\n   */\n  private initializeMessageListener(): void {\n    if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.onMessage) {\n      chrome.runtime.onMessage.addListener(\n        (\n          request: MessageRequest,\n          sender: chrome.runtime.MessageSender,\n          sendResponse: (response: MessageResponse) => void,\n        ): boolean => {\n          this.handleIncomingMessage(request, sender, sendResponse).catch((error) => {\n            console.error('Error handling incoming message:', error);\n            sendResponse({\n              success: false,\n              error: error instanceof Error ? error.message : 'Unknown error',\n            });\n          });\n\n          return true; // Keep message channel open for async response\n        },\n      );\n    } else {\n      console.warn('Chrome extension APIs not available in this environment');\n    }\n  }\n\n  /**\n   * Handle incoming messages with proper error boundaries\n   */\n  private async handleIncomingMessage(\n    request: MessageRequest,\n    sender: chrome.runtime.MessageSender,\n    sendResponse: (response: MessageResponse) => void,\n  ): Promise<void> {\n    const { command } = request;\n\n    if (this.config.enableLogging) {\n      console.log(`[MessageBroker] Received command: ${command}`, request);\n    }\n\n    const handler = this.handlers.get(command);\n    if (!handler) {\n      sendResponse({\n        success: false,\n        error: 'Unknown command',\n        details: `No handler registered for command: ${command}`,\n      });\n      return;\n    }\n\n    try {\n      await handler(request, sender as ChromeSender, sendResponse);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error(`Error in handler for command ${command}:`, error);\n      sendResponse({\n        success: false,\n        error: errorMessage,\n      });\n    }\n  }\n\n  /**\n   * Register a message handler for a specific command\n   */\n  public registerHandler(command: string, handler: MessageHandler['handler']): void {\n    if (this.handlers.has(command)) {\n      console.warn(`[MessageBroker] Overwriting existing handler for command: ${command}`);\n    }\n\n    this.handlers.set(command, handler);\n\n    if (this.config.enableLogging) {\n      console.log(`[MessageBroker] Registered handler for command: ${command}`);\n    }\n  }\n\n  /**\n   * Unregister a message handler\n   */\n  public unregisterHandler(command: string): boolean {\n    const removed = this.handlers.delete(command);\n\n    if (this.config.enableLogging && removed) {\n      console.log(`[MessageBroker] Unregistered handler for command: ${command}`);\n    }\n\n    return removed;\n  }\n\n  /**\n   * Send a message with retry logic and timeout handling\n   */\n  public async sendMessage(\n    request: MessageRequest,\n    tabId?: number,\n  ): Promise<MessageResponse> {\n    const requestId = this.generateRequestId();\n    const requestWithId = { ...request, requestId, timestamp: Date.now() };\n\n    if (this.config.enableLogging) {\n      console.log(`[MessageBroker] Sending message:`, requestWithId);\n    }\n\n    return this.sendMessageWithRetry(requestWithId, tabId, 0);\n  }\n\n  /**\n   * Send message with retry logic\n   */\n  private async sendMessageWithRetry(\n    request: MessageRequest,\n    tabId: number | undefined,\n    attempt: number,\n  ): Promise<MessageResponse> {\n    try {\n      return await this.sendSingleMessage(request, tabId);\n    } catch (error) {\n      if (attempt < this.config.retryAttempts) {\n        if (this.config.enableLogging) {\n          console.warn(\n            `[MessageBroker] Retry attempt ${attempt + 1} for message:`,\n            request.command,\n          );\n        }\n\n        await this.delay(this.config.retryDelay * (attempt + 1));\n        return this.sendMessageWithRetry(request, tabId, attempt + 1);\n      }\n\n      throw error;\n    }\n  }\n\n  /**\n   * Send a single message with timeout handling\n   */\n  private async sendSingleMessage(\n    request: MessageRequest,\n    tabId?: number,\n  ): Promise<MessageResponse> {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        reject(new Error(`Message timeout after ${this.config.timeout}ms`));\n      }, this.config.timeout);\n\n      const responseHandler = (response: MessageResponse): void => {\n        clearTimeout(timeout);\n\n        if (chrome.runtime.lastError) {\n          reject(new Error(chrome.runtime.lastError.message));\n          return;\n        }\n\n        if (!response) {\n          reject(new Error('No response received'));\n          return;\n        }\n\n        resolve(response);\n      };\n\n      try {\n        if (typeof chrome === 'undefined' || !chrome.runtime) {\n          clearTimeout(timeout);\n          reject(new Error('Chrome extension APIs not available'));\n          return;\n        }\n\n        if (tabId) {\n          chrome.tabs.sendMessage(tabId, request, responseHandler);\n        } else {\n          chrome.runtime.sendMessage(request, responseHandler);\n        }\n      } catch (error) {\n        clearTimeout(timeout);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Send a message to a specific tab\n   */\n  public async sendMessageToTab(\n    tabId: number,\n    request: MessageRequest,\n  ): Promise<MessageResponse> {\n    return this.sendMessage(request, tabId);\n  }\n\n  /**\n   * Send a command with payload - convenience method\n   */\n  public async sendCommand(command: string, payload: any): Promise<MessageResponse> {\n    const request: MessageRequest = {\n      command,\n      data: payload,\n      timestamp: Date.now()\n    };\n    return this.sendMessage(request);\n  }\n\n  /**\n   * Send a message to the service worker\n   */\n  public async sendMessageToServiceWorker(\n    request: MessageRequest,\n  ): Promise<MessageResponse> {\n    return this.sendMessage({ ...request, target: MESSAGE_TARGETS.SERVICE_WORKER });\n  }\n\n  /**\n   * Send a message to content script\n   */\n  public async sendMessageToContentScript(\n    tabId: number,\n    request: MessageRequest,\n  ): Promise<MessageResponse> {\n    return this.sendMessageToTab(tabId, {\n      ...request,\n      target: MESSAGE_TARGETS.CONTENT_SCRIPT,\n    });\n  }\n\n  /**\n   * Broadcast a message to all tabs\n   */\n  public async broadcastMessage(request: MessageRequest): Promise<MessageResponse[]> {\n    try {\n      const tabs = await chrome.tabs.query({});\n      const promises = tabs\n        .filter((tab) => tab.id !== undefined)\n        .map((tab) => this.sendMessageToTab(tab.id!, request).catch(() => null));\n\n      const results = await Promise.all(promises);\n      return results.filter((result): result is MessageResponse => result !== null);\n    } catch (error) {\n      console.error('Error broadcasting message:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Generate a unique request ID\n   */\n  private generateRequestId(): string {\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Delay utility for retry logic\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Get registered handlers (for debugging)\n   */\n  public getRegisteredHandlers(): string[] {\n    return Array.from(this.handlers.keys());\n  }\n\n  /**\n   * Clear all handlers\n   */\n  public clearHandlers(): void {\n    this.handlers.clear();\n\n    if (this.config.enableLogging) {\n      console.log('[MessageBroker] All handlers cleared');\n    }\n  }\n\n  /**\n   * Get broker statistics\n   */\n  public getStats(): {\n    handlersCount: number;\n    pendingRequestsCount: number;\n  } {\n    return {\n      handlersCount: this.handlers.size,\n      pendingRequestsCount: this.pendingRequests.size,\n    };\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * CandidAI Offscreen Document - Audio Processing Service\n * Handles audio capture and processing in the background\n */\n\nimport { MessageBroker } from '../ts/utils/messaging';\n\n// =============================================================================\n// TYPE DEFINITIONS\n// =============================================================================\n\ninterface AudioProcessingState {\n  isRecording: boolean;\n  mediaRecorder: MediaRecorder | null;\n  audioStream: MediaStream | null;\n  audioChunks: Blob[];\n}\n\n// =============================================================================\n// OFFSCREEN CONTROLLER\n// =============================================================================\n\n/**\n * Offscreen Document Controller - Manages audio processing\n */\nclass OffscreenController {\n  private messageBroker: MessageBroker;\n  private audioState: AudioProcessingState;\n\n  constructor() {\n    this.messageBroker = new MessageBroker();\n    \n    this.audioState = {\n      isRecording: false,\n      mediaRecorder: null,\n      audioStream: null,\n      audioChunks: [],\n    };\n\n    this.initializeMessageHandlers();\n  }\n\n  /**\n   * Initialize message handlers for offscreen document\n   */\n  private initializeMessageHandlers(): void {\n    this.messageBroker.registerHandler('START_AUDIO_CAPTURE', this.startAudioCapture.bind(this));\n    this.messageBroker.registerHandler('STOP_AUDIO_CAPTURE', this.stopAudioCapture.bind(this));\n    this.messageBroker.registerHandler('PING', this.handlePing.bind(this));\n  }\n\n  /**\n   * Start audio capture\n   */\n  private async startAudioCapture(request: any, sender: any, sendResponse: (response: any) => void): Promise<void> {\n    try {\n      if (this.audioState.isRecording) {\n        sendResponse({ success: false, error: 'Already recording' });\n        return;\n      }\n\n      // Request microphone access\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n        },\n      });\n\n      this.audioState.audioStream = stream;\n      this.audioState.mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm;codecs=opus',\n      });\n\n      this.audioState.audioChunks = [];\n\n      // Set up event handlers\n      this.audioState.mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          this.audioState.audioChunks.push(event.data);\n        }\n      };\n\n      this.audioState.mediaRecorder.onstop = () => {\n        this.processAudioData();\n      };\n\n      this.audioState.mediaRecorder.onerror = (event) => {\n        console.error('MediaRecorder error:', event);\n        this.stopAudioCapture(null, null, () => {});\n      };\n\n      // Start recording\n      this.audioState.mediaRecorder.start(1000); // Collect data every second\n      this.audioState.isRecording = true;\n\n      sendResponse({ success: true, message: 'Audio capture started' });\n\n    } catch (error) {\n      console.error('Failed to start audio capture:', error);\n      sendResponse({ \n        success: false, \n        error: error instanceof Error ? error.message : 'Failed to start audio capture'\n      });\n    }\n  }\n\n  /**\n   * Stop audio capture\n   */\n  private stopAudioCapture(request: any, sender: any, sendResponse: (response: any) => void): void {\n    try {\n      if (!this.audioState.isRecording) {\n        sendResponse({ success: false, error: 'Not recording' });\n        return;\n      }\n\n      // Stop recording\n      if (this.audioState.mediaRecorder && this.audioState.mediaRecorder.state !== 'inactive') {\n        this.audioState.mediaRecorder.stop();\n      }\n\n      // Stop all audio tracks\n      if (this.audioState.audioStream) {\n        this.audioState.audioStream.getTracks().forEach(track => track.stop());\n        this.audioState.audioStream = null;\n      }\n\n      this.audioState.isRecording = false;\n      this.audioState.mediaRecorder = null;\n\n      sendResponse({ success: true, message: 'Audio capture stopped' });\n\n    } catch (error) {\n      console.error('Failed to stop audio capture:', error);\n      sendResponse({ \n        success: false, \n        error: error instanceof Error ? error.message : 'Failed to stop audio capture'\n      });\n    }\n  }\n\n  /**\n   * Process captured audio data\n   */\n  private async processAudioData(): Promise<void> {\n    try {\n      if (this.audioState.audioChunks.length === 0) {\n        return;\n      }\n\n      const audioBlob = new Blob(this.audioState.audioChunks, { type: 'audio/webm' });\n      \n      // Convert to ArrayBuffer for processing\n      const arrayBuffer = await audioBlob.arrayBuffer();\n      \n      // Send audio data to service worker for transcription\n      await this.messageBroker.sendMessage({\n        command: 'PROCESS_AUDIO_DATA',\n        payload: {\n          audioData: Array.from(new Uint8Array(arrayBuffer)),\n          timestamp: Date.now(),\n          mimeType: 'audio/webm',\n        },\n      });\n\n      // Clear audio chunks\n      this.audioState.audioChunks = [];\n\n    } catch (error) {\n      console.error('Failed to process audio data:', error);\n    }\n  }\n\n  /**\n   * Handle ping requests\n   */\n  private handlePing(request: any, sender: any, sendResponse: (response: any) => void): void {\n    sendResponse({ \n      success: true, \n      message: 'Offscreen document is active',\n      timestamp: Date.now(),\n    });\n  }\n\n  /**\n   * Initialize the offscreen document\n   */\n  public initialize(): void {\n    console.log('CandidAI Offscreen document initialized');\n    \n    // Notify service worker that offscreen document is ready\n    this.messageBroker.sendMessage({\n      command: 'OFFSCREEN_READY',\n      payload: { timestamp: Date.now() },\n    }).catch(error => {\n      console.error('Failed to notify service worker:', error);\n    });\n  }\n}\n\n// =============================================================================\n// INITIALIZATION\n// =============================================================================\n\n// Initialize when DOM is loaded\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    const controller = new OffscreenController();\n    controller.initialize();\n  });\n} else {\n  const controller = new OffscreenController();\n  controller.initialize();\n} "],"names":[],"sourceRoot":""}