<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CandidAI Interview Assistant</title>

    <!-- Design System Integration -->
    <link rel="stylesheet" href="../css/variables.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="sidepanel.css" />

    <!-- Preconnect for Performance Optimization -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Primary Application Container -->
    <div id="candidai-app" class="ca-app">
      <!-- Header Component with Branding -->
      <header class="ca-header">
        <div class="ca-header__brand">
          <img src="../assets/icons/icon-32.png" alt="CandidAI Logo" class="ca-header__logo" />
          <h1 class="ca-header__title">CandidAI</h1>
        </div>
        <div class="ca-header__controls">
          <button id="listening-toggle" class="ca-btn ca-btn--icon" aria-label="Toggle listening">
            <svg class="ca-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
              <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
              <line x1="12" y1="19" x2="12" y2="23" />
              <line x1="8" y1="23" x2="16" y2="23" />
            </svg>
          </button>
          <button id="settings-btn" class="ca-btn ca-btn--icon" aria-label="Settings">
            <svg class="ca-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="3" />
              <path d="M12 1v6m0 6v6m10-7h-6m-6 0H1" />
            </svg>
          </button>
        </div>
      </header>

      <!-- Tab Navigation Component - Implements Composite Pattern -->
      <nav class="ca-tabs" role="tablist" aria-label="Assistant features">
        <button
          id="tab-assistant"
          class="ca-tabs__tab ca-tabs__tab--active"
          role="tab"
          aria-selected="true"
          aria-controls="panel-assistant"
          data-tab-target="assistant"
        >
          <svg class="ca-tabs__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path
              d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.11 2-1.61-.5-3.39-.5-5 0C6.3 3.5 5.04 3 3.29 3A5.5 5.5 0 0 0 0 8.5c0 2.3 1.5 4.05 3 5.5Z"
            />
            <path d="M12 5L8 21l4-7 4 7-4-16" />
          </svg>
          <span class="ca-tabs__label">Assistant</span>
        </button>

        <button
          id="tab-visual"
          class="ca-tabs__tab"
          role="tab"
          aria-selected="false"
          aria-controls="panel-visual"
          data-tab-target="visual"
        >
          <svg class="ca-tabs__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <circle cx="8.5" cy="8.5" r="1.5" />
            <polyline points="21 15 16 10 5 21" />
          </svg>
          <span class="ca-tabs__label">Visual</span>
        </button>

        <button
          id="tab-history"
          class="ca-tabs__tab"
          role="tab"
          aria-selected="false"
          aria-controls="panel-history"
          data-tab-target="history"
        >
          <svg class="ca-tabs__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="1 4 1 10 7 10" />
            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10" />
          </svg>
          <span class="ca-tabs__label">History</span>
        </button>
      </nav>

      <!-- Main Content Container - Implements Viewport Pattern -->
      <main class="ca-content">
        <!-- Interview Assistant Panel - Primary Interaction Surface -->
        <div
          id="panel-assistant"
          class="ca-panel ca-panel--active"
          role="tabpanel"
          aria-labelledby="tab-assistant"
        >
          <!-- Real-time Transcription Component -->
          <section class="ca-transcription" aria-label="Live transcription">
            <h2 class="ca-section-title">Live Transcription</h2>
            <div id="transcription-container" class="ca-transcription__container">
              <div class="ca-transcription__placeholder">
                <svg
                  class="ca-placeholder__icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                >
                  <path d="M12 2v10m0 4v6m4-16v12m4-8v4M4 18v-4m4-4v8" />
                </svg>
                <p class="ca-placeholder__text">Waiting for audio...</p>
              </div>
            </div>
          </section>

          <!-- AI Suggestions Component - Implements Observer Pattern -->
          <section class="ca-suggestions" aria-label="AI suggestions">
            <h2 class="ca-section-title">Suggested Responses</h2>
            <div id="suggestions-container" class="ca-suggestions__container">
              <!-- Dynamically populated suggestion cards -->
            </div>
          </section>

          <!-- Interactive Chat Interface - Implements Command Pattern -->
          <section class="ca-chat" aria-label="AI chat assistant">
            <div id="chat-messages" class="ca-chat__messages">
              <!-- Dynamic message thread -->
            </div>
            <form id="chat-form" class="ca-chat__form">
              <input
                type="text"
                id="chat-input"
                class="ca-chat__input"
                placeholder="Ask CandidAI for help..."
                aria-label="Chat message input"
                autocomplete="off"
              />
              <button
                type="submit"
                class="ca-btn ca-btn--primary ca-chat__submit"
                aria-label="Send message"
              >
                <svg class="ca-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <line x1="22" y1="2" x2="11" y2="13" />
                  <polygon points="22 2 15 22 11 13 2 9 22 2" />
                </svg>
              </button>
            </form>
          </section>
        </div>

        <!-- Visual Analysis Panel - Implements Image Processing Pipeline -->
        <div id="panel-visual" class="ca-panel" role="tabpanel" aria-labelledby="tab-visual" hidden>
          <section class="ca-visual-analysis">
            <h2 class="ca-section-title">Visual Analysis</h2>

            <div class="ca-visual__controls">
              <button id="capture-screen" class="ca-btn ca-btn--primary ca-btn--full">
                <svg class="ca-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path
                    d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"
                  />
                  <circle cx="12" cy="13" r="4" />
                </svg>
                Capture Screen
              </button>
            </div>

            <div id="visual-preview" class="ca-visual__preview">
              <!-- Dynamic image preview -->
            </div>

            <div id="visual-analysis-results" class="ca-visual__results">
              <!-- OCR and analysis results -->
            </div>
          </section>
        </div>

        <!-- Performance History Panel - Implements Analytics Dashboard -->
        <div
          id="panel-history"
          class="ca-panel"
          role="tabpanel"
          aria-labelledby="tab-history"
          hidden
        >
          <section class="ca-history">
            <h2 class="ca-section-title">Interview History</h2>
            <div id="history-container" class="ca-history__container">
              <!-- Dynamic interview history cards -->
            </div>
          </section>
        </div>
      </main>

      <!-- Status Bar Component - System Health Monitoring -->
      <footer class="ca-status-bar">
        <div class="ca-status__indicator" id="status-indicator">
          <span class="ca-status__dot"></span>
          <span class="ca-status__text">Ready</span>
        </div>
        <div class="ca-status__info">
          <span id="token-usage" class="ca-status__tokens">0 tokens</span>
        </div>
      </footer>

      <!-- Quick Settings Modal -->
      <div id="settings-modal" class="ca-modal" hidden>
        <div class="ca-modal__overlay" id="settings-overlay"></div>
        <div class="ca-modal__content">
          <header class="ca-modal__header">
            <h3 class="ca-modal__title">Quick Settings</h3>
            <button
              id="close-settings"
              class="ca-btn ca-btn--icon ca-modal__close"
              aria-label="Close settings"
            >
              <svg class="ca-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </header>

          <div class="ca-modal__body">
            <!-- Essential Settings -->
            <div class="ca-settings-group">
              <label class="ca-settings-label">
                <svg class="ca-settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M12 2v10m0 4v6m4-16v12m4-8v4M4 18v-4m4-4v8" />
                </svg>
                LLM Provider
              </label>
              <select id="quick-provider" class="ca-settings-select">
                <option value="openai">OpenAI</option>
                <option value="anthropic">Anthropic</option>
                <option value="gemini">Google Gemini</option>
              </select>
            </div>

            <div class="ca-settings-group">
              <label class="ca-settings-label">
                <svg class="ca-settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="12" cy="12" r="10" />
                  <line x1="2" y1="12" x2="22" y2="12" />
                  <path
                    d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
                  />
                </svg>
                Language
              </label>
              <select id="quick-language" class="ca-settings-select">
                <option value="en-US">English (US)</option>
                <option value="en-GB">English (UK)</option>
                <option value="es-ES">Spanish</option>
                <option value="fr-FR">French</option>
                <option value="de-DE">German</option>
              </select>
            </div>

            <div class="ca-settings-group">
              <label class="ca-settings-label">
                <svg class="ca-settings-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                </svg>
                Response Style
              </label>
              <select id="quick-tone" class="ca-settings-select">
                <option value="professional">Professional</option>
                <option value="casual">Casual</option>
                <option value="enthusiastic">Enthusiastic</option>
                <option value="confident">Confident</option>
              </select>
            </div>

            <div class="ca-settings-group">
              <label class="ca-settings-checkbox">
                <input type="checkbox" id="quick-auto-suggestions" />
                <span class="ca-settings-checkmark"></span>
                Auto-generate suggestions
              </label>
            </div>
          </div>

          <footer class="ca-modal__footer">
            <button id="open-full-settings" class="ca-btn ca-btn--secondary">Full Settings</button>
            <button id="save-quick-settings" class="ca-btn ca-btn--primary">Save</button>
          </footer>
        </div>
      </div>
    </div>

    <!-- Fallback Navigation Script -->
    <script src="navigation-fallback.js"></script>
    
    <!-- Script Modules - Implements Module Pattern -->
    <script type="module" src="../sidepanel.js"></script>
  </body>
</html>
